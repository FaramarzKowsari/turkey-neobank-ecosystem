<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neobanking Frontier: Turkey's Digital Ecosystem</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM CDN -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Core -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; transition: background-color 0.3s ease; overflow-x: hidden; }
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #6366f1; border-radius: 10px; }
        .animate-in { animation: fadeIn 0.4s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
        
        .pulse-button { animation: pulse-indigo 2s infinite; }
        @keyframes pulse-indigo {
            0% { box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4); }
            70% { box-shadow: 0 0 0 8px rgba(99, 102, 241, 0); }
            100% { box-shadow: 0 0 0 0 rgba(99, 102, 241, 0); }
        }

        /* Micro-mini range input styling */
        input[type=range] { height: 3px; border-radius: 5px; background: #cbd5e1; appearance: none; cursor: pointer; }
        input[type=range]::-webkit-slider-thumb { width: 12px; height: 12px; border-radius: 50%; background: #6366f1; appearance: none; border: none; }
        
        .glass-player {
            backdrop-filter: blur(15px);
            background: rgba(255, 255, 255, 0.92);
            border: 1px solid rgba(99, 102, 241, 0.15);
        }
        .dark .glass-player {
            background: rgba(15, 23, 42, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .card-blu { background: linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%); }
        .card-red { background: linear-gradient(135deg, #ff4d4d 0%, #ff1a1a 100%); }
        .phone-frame { box-shadow: 0 50px 100px -20px rgba(0,0,0,0.5); border: 8px solid #1e293b; }
        
        .prose h2 { font-weight: 900; font-size: 1.875rem; margin-top: 2rem; margin-bottom: 1rem; color: #4f46e5; }
        .prose h3 { font-weight: 700; font-size: 1.5rem; margin-top: 1.5rem; margin-bottom: 0.75rem; }
        .prose p { margin-bottom: 1rem; line-height: 1.75; opacity: 0.9; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        /**
         * Robust Icon Component
         * Fixed destructuring and undefined tag errors (React Error #130)
         */
        const Icon = ({ name, size = 24, className = "", ...props }) => {
            const [iconData, setIconData] = React.useState(null);
            const toPascalCase = (str) => str ? str.split('-').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join('') : "";

            React.useEffect(() => {
                const search = () => {
                    if (window.lucide && window.lucide.icons) {
                        const data = window.lucide.icons[toPascalCase(name)] || window.lucide.icons[name];
                        if (data && Array.isArray(data)) { 
                            setIconData(data); 
                            return true; 
                        }
                    }
                    return false;
                };
                if (!search()) {
                    const timer = setInterval(() => { if (search()) clearInterval(timer); }, 100);
                    return () => clearInterval(timer);
                }
            }, [name]);

            if (!iconData || !Array.isArray(iconData) || !iconData[2]) {
                return <span style={{ width: size, height: size, display: 'inline-block' }} className={className}></span>;
            }

            return (
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width={size}
                    height={size}
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    strokeWidth="2"
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    className={`lucide-icon ${className}`}
                    {...props}
                >
                    {iconData[2].map((child, i) => {
                        if (child && Array.isArray(child) && typeof child[0] === 'string') {
                            return React.createElement(child[0], { ...child[1], key: i });
                        }
                        return null;
                    })}
                </svg>
            );
        };

        const translations = {
            en: {
                title: "Turkey's Neobanking Revolution",
                startPrompt: "Enter PhD Experience",
                modules: "Chapters",
                score: "Your Result",
                ui: { menu: "MENU", play: "PLAY", pause: "PAUSE", stop: "STOP", reset: "RESET", speed: "SPD", volume: "VOL", home: "HOME", send: "SEND", exit: "EXIT", hint: "HINT" },
                hints: {
                    welcome: "Click 'START EXPERIENCE' to begin the banking simulation.",
                    reg: "Identify yourself to start the virtual session.",
                    kyc: "A neobank scans biometrics to verify ID in minutes.",
                    dash: "Tap 'Add Money' or use the bottom menu to transfer funds.",
                    transfer: "Enter a simulated TR IBAN to test real-time logic."
                },
                sections: {
                    intro: { title: "1. Introduction", content: "Neobanks represent a digital-only revolution in finance. In Turkey, they signify monumental shifts in cost-efficiency and user experience.", image: "https://images.unsplash.com/photo-1563986768609-322da13575f3?auto=format&fit=crop&q=80&w=1200" },
                    simulation: { title: "2. Istanbul Futures Sim", content: "Experience the high-fidelity Istanbul Futures mobile interface with persistent navigation.", isSimulation: true, image: "https://images.unsplash.com/photo-1550565118-3a14e8d0386f?auto=format&fit=crop&q=80&w=1200" },
                    stats: { title: "3. Growth Analytics", content: "Adoption trajectory showing over 95 million digital users in Turkey by 2024.", isStaticChart: true, image: "https://images.unsplash.com/photo-1551288049-bbda0231f67e?auto=format&fit=crop&q=80&w=1200" },
                    deepDive: { 
                        title: "4. The Neobank Model", 
                        content: "A detailed academic analysis on the structural innovation of branchless banking.", 
                        isLongArticle: true,
                        image: "https://images.unsplash.com/photo-1454165833767-027508496b4f?auto=format&fit=crop&q=80&w=1200",
                        article: `
                            <h2>Understanding Neobanking: A Global & Turkish Overview</h2>
                            <p>Neobanks, often referred to as challenger banks, are financial technology firms that offer purely digital banking services. They lack physical branch networks, operating exclusively through mobile apps and web platforms. In the Turkish landscape, the 2021 BDDK regulation marked a historic shift, granting 100% digital banks their own legal framework.</p>
                            
                            <h3>1. The Zero-Branch Advantage</h3>
                            <p>Traditional banks carry massive operational overhead from rent, staff, and legacy physical infrastructure. Neobanks leverage cloud-native cores, reducing costs by up to 60-70%. This efficiency allows for fee-free FAST transfers and higher interest rates for savings accounts.</p>
                            
                            <h3>2. Real-Time Data & AI Integration</h3>
                            <p>Unlike monolithic legacy systems, neobank architectures are API-first. This enables real-time credit scoring, fraud prevention using machine learning, and highly personalized financial insights directly on the user's dashboard.</p>
                            
                            <h3>3. The Turkish Context: Youth & Mobile Adoption</h3>
                            <p>Turkey possesses one of Europe's youngest populations with a mobile penetration rate exceeding 85%. This demographic is ideal for neobanking models that prioritize speed, transparency, and "instant gratification." Pioneers like Enpara set the stage for the current digital banking boom.</p>
                        `
                    },
                    fees: { title: "5. Cost Analysis", content: "Comparison of fee structures between neobanks and traditional heritage banks.", isTable: true, image: "https://images.unsplash.com/photo-1554224155-6726b3ff858f?auto=format&fit=crop&q=80&w=1200" },
                    digitalLira: { title: "6. Digital Lira", content: "TCMB's sovereign digital currency project and its future integration.", image: "https://images.unsplash.com/photo-1621761191319-c6fb62004040?auto=format&fit=crop&q=80&w=1200" },
                    enpara: { title: "7. Case: Enpara", content: "How Turkey's first branchless bank redefined customer satisfaction.", url: "https://www.enpara.com", image: "https://images.unsplash.com/photo-1559526324-4b87b5e36e44?auto=format&fit=crop&q=80&w=1200" },
                    glossary: { title: "8. Glossary", content: "Academic reference for key terminology in the financial technology sector.", isGlossary: true, image: "https://images.unsplash.com/photo-1456513080510-7bf3a84b82f8?auto=format&fit=crop&q=80&w=1200" },
                    quiz: { title: "9. Assessment", content: "Validate your research findings with an interactive quiz.", isQuiz: true, image: "https://images.unsplash.com/photo-1434030216411-0b793f4b4173?auto=format&fit=crop&q=80&w=1200" }
                }
            },
            tr: {
                title: "Türkiye'de Neobank Devrimi",
                startPrompt: "Doktora Deneyimine Gir",
                modules: "Bölümler",
                score: "Sonuç",
                ui: { menu: "MENÜ", play: "BAŞLAT", pause: "PAUSE", stop: "DUR", reset: "SIFIRLA", speed: "HIZ", volume: "SES", home: "ANA SAYFA", send: "GÖNDER", exit: "ÇIKIŞ", hint: "İPUCU" },
                hints: {
                    welcome: "Bankacılık simülasyonunu başlatmak için 'START EXPERIENCE' butonuna tıklayın.",
                    reg: "Sanal oturumu başlatmak için isminizi girin.",
                    kyc: "Neobankalar kimlik doğrulamayı biometrik tarama ile dakikalar içinde yapar.",
                    dash: "Para ekleyebilir veya alt menüyü kullanarak transfer yapabilirsiniz.",
                    transfer: "Gerçek zamanlı FAST mantığını test etmek için TR IBAN girin."
                },
                sections: {
                    intro: { title: "1. Giriş", content: "Neobankalar finans dünyasında dijital devrimi temsil eder. Türkiye'de maliyet verimliliği açısından büyük bir değişim yaratıyorlar.", image: "https://images.unsplash.com/photo-1563986768609-322da13575f3?auto=format&fit=crop&q=80&w=1200" },
                    simulation: { title: "2. Canlı Simülatör", content: "Yüksek kaliteli Istanbul Futures mobil arayüzünü kesintisiz navigasyonla deneyimleyin.", isSimulation: true, image: "https://images.unsplash.com/photo-1550565118-3a14e8d0386f?auto=format&fit=crop&q=80&w=1200" },
                    stats: { title: "3. Büyüme Verileri", content: "Türkiye'deki dijital kullanıcı büyümesinin analizi (2018-2024).", isStaticChart: true, image: "https://images.unsplash.com/photo-1551288049-bbda0231f67e?auto=format&fit=crop&q=80&w=1200" },
                    deepDive: { 
                        title: "4. Neobank Modeli", 
                        content: "Şubesiz bankacılık yapıları ve düzenleyici çerçeveler üzerine detaylı akademik analiz.", 
                        isLongArticle: true,
                        image: "https://images.unsplash.com/photo-1454165833767-027508496b4f?auto=format&fit=crop&q=80&w=1200",
                        article: `<h2>Neobank Yapısı: Dijital Dönüşümün Temelleri</h2><p>Neobankalar, fiziksel şube gereksinimini ortadan kaldıran, operasyonlarını tamamen dijital platformlarda yürüten yeni nesil kuruluşlardır.</p>`
                    },
                    fees: { title: "5. Maliyet Analizi", content: "Masrafsız yapıların geleneksel bankacılık operasyon maliyetleri ile analizi.", isTable: true, image: "https://images.unsplash.com/photo-1554224155-6726b3ff858f?auto=format&fit=crop&q=80&w=1200" },
                    digitalLira: { title: "6. Dijital Lira", content: "TCMB'nin dijital egemen para birimi projesi.", image: "https://images.unsplash.com/photo-1621761191319-c6fb62004040?auto=format&fit=crop&q=80&w=1200" },
                    enpara: { title: "7. Vaka: Enpara", content: "Türkiye'nin ilk şubesiz bankacılık başarı hikayesi.", url: "https://www.enpara.com", image: "https://images.unsplash.com/photo-1559526324-4b87b5e36e44?auto=format&fit=crop&q=80&w=1200" },
                    glossary: { title: "8. Sözlük", content: "Finansal teknoloji terminolojisi akademik rehberi.", isGlossary: true, image: "https://images.unsplash.com/photo-1456513080510-7bf3a84b82f8?auto=format&fit=crop&q=80&w=1200" },
                    quiz: { title: "9. Bilgi Testi", content: "Dijital bankacılık bilginizi test edin.", isQuiz: true, image: "https://images.unsplash.com/photo-1434030216411-0b793f4b4173?auto=format&fit=crop&q=80&w=1200" }
                }
            }
        };

        const glossaryData = [
            { term: "PSD2", def: "Payment Services Directive 2 - Standard for open banking." },
            { term: "BaaS", def: "Banking as a Service - Infrastructure sharing via APIs." },
            { term: "BDDK", def: "Banking Regulation and Supervision Agency of Turkey." },
            { term: "Digital Bank", def: "A branchless entity licensed under 2021 TR regulations." }
        ];

        const NeobankSimulation = ({ lang, notify }) => {
            const t = translations[lang];
            const [step, setStep] = React.useState('start');
            const [balance, setBalance] = React.useState(0);
            const [name, setName] = React.useState('');
            const [iban, setIban] = React.useState('');
            const [amt, setAmt] = React.useState('');
            const [showHint, setShowHint] = React.useState(false);

            const handleTransfer = () => {
                if(!iban.startsWith('TR') || !amt) return notify("Check IBAN/Amount");
                const val = parseFloat(amt);
                if(val > balance) return notify("Low Balance");
                setBalance(prev => prev - val);
                notify(`Sent ${val} TL to ${iban}`);
                setStep('dash'); setIban(''); setAmt('');
            };

            const BottomNav = () => (
                <div className="absolute bottom-0 left-0 right-0 h-16 bg-white border-t border-slate-100 flex items-center justify-around px-4 z-50">
                    <button onClick={() => setStep('dash')} className={`flex flex-col items-center gap-1 ${step === 'dash' ? 'text-indigo-600' : 'text-slate-300'}`}><Icon name="home" size={20}/><span className="text-[7px] font-black uppercase tracking-widest">{t.ui.home}</span></button>
                    <button onClick={() => setStep('transfer')} className={`flex flex-col items-center gap-1 ${step === 'transfer' ? 'text-indigo-600' : 'text-slate-300'}`}><Icon name="send" size={20}/><span className="text-[7px] font-black uppercase tracking-widest">{t.ui.send}</span></button>
                    <button onClick={() => setStep('start')} className="flex flex-col items-center gap-1 text-slate-300"><Icon name="power" size={20}/><span className="text-[7px] font-black uppercase tracking-widest">{t.ui.exit}</span></button>
                </div>
            );

            return (
                <div className="w-full h-full flex items-center justify-center p-4">
                    <div className="w-[300px] h-[600px] bg-white rounded-[4rem] relative overflow-hidden phone-frame animate-in">
                        <div className="absolute top-0 left-1/2 -translate-x-1/2 w-28 h-6 bg-slate-900 rounded-b-3xl z-50"></div>
                        
                        {/* Start Screen */}
                        {step === 'start' && (
                            <div className="h-full bg-slate-950 text-white flex flex-col items-center justify-center p-10 text-center space-y-12 animate-in">
                                <div className="w-20 h-20 bg-indigo-600 rounded-[2.5rem] flex items-center justify-center rotate-12 shadow-2xl"><Icon name="trending-up" size={40}/></div>
                                <h3 className="text-2xl font-black uppercase tracking-tighter leading-none">Istanbul Futures</h3>
                                <button onClick={() => setStep('reg')} className="w-full py-4 bg-white text-slate-900 rounded-3xl font-black uppercase text-[10px] tracking-widest hover:scale-105 active:scale-95 transition-all">START EXPERIENCE</button>
                            </div>
                        )}

                        {/* Registration */}
                        {step === 'reg' && (
                            <div className="h-full bg-white p-8 flex flex-col text-slate-800 animate-in">
                                <button onClick={() => setStep('start')} className="w-10 h-10 bg-slate-50 rounded-2xl flex items-center justify-center text-slate-400 mb-8 hover:bg-slate-100"><Icon name="chevron-left" /></button>
                                <h3 className="text-2xl font-black uppercase mb-2">Identify</h3>
                                <p className="text-xs text-slate-400 font-medium mb-8">Personalize your virtual banking session.</p>
                                <input type="text" value={name} onChange={e => setName(e.target.value)} placeholder="Full Name" className="w-full p-4 bg-slate-50 rounded-2xl border-none outline-indigo-500 shadow-inner font-bold mb-4"/>
                                <button onClick={() => setStep('kyc')} className="w-full py-4 bg-indigo-600 text-white rounded-3xl font-black uppercase text-[10px] tracking-widest mt-auto shadow-lg active:scale-95 transition-transform">CONTINUE</button>
                            </div>
                        )}

                        {/* KYC */}
                        {step === 'kyc' && (
                            <div className="h-full bg-slate-900 text-white p-8 flex flex-col items-center justify-center text-center space-y-8 animate-in">
                                <Icon name="fingerprint" size={64} className="text-indigo-400 animate-pulse" />
                                <h3 className="text-xl font-black uppercase">KYC Scan</h3>
                                <div className="w-full h-40 border-2 border-dashed border-indigo-500/30 rounded-[3rem] bg-indigo-500/5 flex items-center justify-center text-[9px] font-black uppercase text-indigo-300 tracking-widest">Scanning Identity...</div>
                                <button onClick={() => { setStep('dash'); notify("Welcome to Istanbul Futures"); }} className="w-full py-4 bg-indigo-500 rounded-3xl font-black uppercase text-[10px] tracking-widest shadow-xl shadow-indigo-500/20 active:scale-95 transition-transform">VERIFY</button>
                            </div>
                        )}

                        {/* Dashboard */}
                        {step === 'dash' && (
                            <div className="h-full bg-slate-50 flex flex-col pb-16 text-slate-800 animate-in relative">
                                <div className="p-6 pb-2 flex justify-between items-center">
                                    <div className="flex items-center gap-3">
                                        <div className="w-10 h-10 bg-indigo-600 rounded-full flex items-center justify-center text-white font-black">{name.charAt(0) || 'U'}</div>
                                        <div><p className="text-[9px] font-black opacity-40 uppercase">Profile</p><p className="text-xs font-bold leading-none">{name || 'User'}</p></div>
                                    </div>
                                    <button onClick={() => setShowHint(true)}><Icon name="help-circle" size={20} className="text-slate-300" /></button>
                                </div>
                                <div className="p-4">
                                    <div className="card-blu p-8 rounded-[3rem] text-white space-y-4 shadow-xl shadow-blue-500/20">
                                        <div className="flex justify-between items-center opacity-60 text-[8px] font-black uppercase tracking-widest"><span>Savings</span><Icon name="more-horizontal" size={16}/></div>
                                        <h4 className="text-4xl font-black tracking-tighter leading-none">{balance.toLocaleString()} <span className="text-lg font-medium opacity-50">TL</span></h4>
                                        <button onClick={() => { setBalance(balance + 2500); notify("2,500 TL Credited"); }} className="w-full py-3 bg-white/20 rounded-2xl text-[9px] font-black uppercase tracking-widest hover:bg-white/30 transition-all">+ ADD FUNDS</button>
                                    </div>
                                </div>
                                <div className="p-6 space-y-4 flex-1 overflow-y-auto">
                                    <div className="flex justify-between items-center"><h5 className="text-[10px] font-black text-slate-400 uppercase tracking-widest">History</h5><span className="text-[8px] text-indigo-600 font-bold uppercase">View all</span></div>
                                    {balance === 0 ? <div className="py-20 text-center text-[10px] font-black text-slate-300 uppercase tracking-widest">Empty Wallet</div> : 
                                    <div className="bg-white p-4 rounded-3xl border border-slate-100 flex justify-between items-center shadow-sm">
                                        <div className="flex items-center gap-3"><div className="p-2 bg-indigo-50 text-indigo-600 rounded-xl"><Icon name="plus" size={16}/></div><div><p className="text-xs font-black text-slate-800 uppercase leading-none mb-1">Deposit</p><p className="text-[8px] text-slate-300 uppercase font-black tracking-tighter">FAST Transfer Received</p></div></div>
                                        <span className="text-xs font-black text-indigo-600">+{balance.toLocaleString()}</span>
                                    </div>}
                                </div>
                                <BottomNav />
                                {showHint && (
                                    <div className="absolute inset-0 z-[60] bg-slate-900/60 backdrop-blur-sm flex items-center justify-center p-6 animate-in">
                                        <div className="bg-white p-6 rounded-[2.5rem] shadow-2xl space-y-4">
                                            <h4 className="text-xs font-black uppercase text-indigo-600 tracking-widest">{t.ui.hint}</h4>
                                            <p className="text-[11px] font-medium leading-relaxed opacity-70 italic">{t.hints.dash}</p>
                                            <button onClick={() => setShowHint(false)} className="w-full py-3 bg-slate-900 text-white rounded-2xl font-black text-[10px]">GOT IT</button>
                                        </div>
                                    </div>
                                )}
                            </div>
                        )}

                        {/* Transfer */}
                        {step === 'transfer' && (
                            <div className="h-full bg-white flex flex-col pb-16 animate-in text-slate-800">
                                <div className="p-6 flex items-center justify-between border-b border-slate-50 sticky top-0 z-50 bg-white">
                                    <button onClick={() => setStep('dash')} className="p-1 hover:bg-slate-50 rounded-full text-slate-400"><Icon name="chevron-left"/></button>
                                    <span className="text-[10px] font-black uppercase tracking-[0.2em] text-indigo-600">FAST Transfer</span>
                                    <button onClick={() => setStep('dash')} className="text-[8px] font-black uppercase text-slate-300">CANCEL</button>
                                </div>
                                <div className="p-8 space-y-8 flex-1 overflow-y-auto">
                                    <div className="space-y-1"><label className="text-[9px] font-black text-slate-400 uppercase tracking-widest">Recipient IBAN</label><input type="text" value={iban} onChange={e => setIban(e.target.value.toUpperCase())} placeholder="TR..." className="w-full p-4 bg-slate-50 rounded-2xl border-none font-bold text-sm shadow-inner uppercase"/></div>
                                    <div className="space-y-1"><label className="text-[9px] font-black text-slate-400 uppercase tracking-widest">Amount to send</label><input type="number" value={amt} onChange={e => setAmt(e.target.value)} placeholder="0" className="w-full p-6 bg-slate-50 rounded-2xl border-none text-4xl font-black text-indigo-600 shadow-inner"/></div>
                                    <button onClick={handleTransfer} className="w-full py-5 bg-slate-950 text-white rounded-[2.5rem] font-black uppercase text-[10px] tracking-widest shadow-2xl active:scale-95 transition-transform mt-auto">SEND ANONYMOUSLY</button>
                                </div>
                                <BottomNav />
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const App = () => {
            const [lang, setLang] = React.useState('en');
            const [activeTab, setActiveTab] = React.useState('intro');
            const [sidebarOpen, setSidebarOpen] = React.useState(false);
            const [hasInteracted, setHasInteracted] = React.useState(false);
            const [isPlaying, setIsPlaying] = React.useState(false);
            const [playbackSpeed, setPlaybackSpeed] = React.useState(1);
            const [volume, setVolume] = React.useState(1);
            const [isDark, setIsDark] = React.useState(false);
            const [message, setMessage] = React.useState(null);

            const synth = typeof window !== 'undefined' ? window.speechSynthesis : null;
            const t = translations[lang];
            const navItems = Object.keys(t.sections);

            const notify = (msg) => { setMessage(msg); setTimeout(() => setMessage(null), 3000); };

            const speakText = () => {
                if (!synth || !hasInteracted) return;
                synth.cancel(); 
                const u = new SpeechSynthesisUtterance(`${t.sections[activeTab].title}. ${t.sections[activeTab].content}`);
                u.rate = playbackSpeed; u.volume = volume;
                u.onend = () => setIsPlaying(false); u.onstart = () => setIsPlaying(true);
                const voices = synth.getVoices();
                const target = lang === 'en' ? 'en-US' : 'tr-TR';
                const v = voices.find(v => v.lang.includes(target)) || voices[0];
                if (v) u.voice = v;
                setTimeout(() => synth.speak(u), 50);
            };

            React.useEffect(() => { if (isPlaying) speakText(); }, [playbackSpeed, volume]);
            React.useEffect(() => { if (hasInteracted) { synth.cancel(); setTimeout(speakText, 600); } }, [activeTab, lang, hasInteracted]);

            return (
                <div className={`flex h-screen font-sans overflow-hidden transition-colors duration-500 ${isDark ? 'bg-slate-950 text-slate-100' : 'bg-slate-50 text-slate-900'}`} onClick={() => { if(!hasInteracted) setHasInteracted(true); }}>
                    {!hasInteracted && (
                        <div className="fixed inset-0 z-[100] bg-indigo-950 flex items-center justify-center p-6 text-center">
                            <button className="bg-white p-12 rounded-[4rem] shadow-2xl flex flex-col items-center gap-8 animate-in active:scale-95 transition-transform border-[12px] border-white">
                                <div className="w-24 h-24 bg-indigo-600 text-white rounded-full flex items-center justify-center shadow-2xl pulse-button"><Icon name="play" size={48} /></div>
                                <h2 className="text-2xl font-black text-slate-900 tracking-tight uppercase leading-none">{t.startPrompt}</h2>
                            </button>
                        </div>
                    )}
                    
                    {message && (
                        <div className="fixed top-12 left-1/2 -translate-x-1/2 z-[110] bg-slate-900 text-white px-6 py-4 rounded-3xl shadow-2xl flex items-center gap-4 animate-in">
                            <Icon name="check-circle-2" size={24} className="text-emerald-400"/><span className="text-xs font-black uppercase tracking-widest leading-none">{message}</span>
                        </div>
                    )}

                    <div className={`fixed inset-y-0 left-0 z-50 w-72 border-r transform ${sidebarOpen ? 'translate-x-0' : '-translate-x-full'} transition-transform lg:relative lg:translate-x-0 ${isDark ? 'bg-slate-900 border-slate-800' : 'bg-white border-slate-100 shadow-xl lg:shadow-none'}`}>
                        <div className="p-8 border-b flex items-center justify-between border-slate-100 dark:border-slate-800">
                            <div className="flex items-center gap-3 font-black text-xl text-indigo-600 uppercase tracking-tighter leading-none"><Icon name="book-open" size={28} /><span>NEO-TURKEY</span></div>
                            <button onClick={() => setSidebarOpen(false)} className="lg:hidden p-2 hover:bg-slate-100 rounded-xl transition-colors"><Icon name="x" size={24} /></button>
                        </div>
                        <nav className="p-6 space-y-1.5 overflow-y-auto h-[calc(100vh-100px)]">
                            <p className="px-4 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest">Study Modules</p>
                            {navItems.map((key) => (
                                <button key={key} onClick={() => { setActiveTab(key); setSidebarOpen(false); }} className={`w-full flex items-center gap-4 px-6 py-4.5 rounded-[2rem] transition-all ${activeTab === key ? 'bg-indigo-600 text-white shadow-xl scale-105' : 'text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800'}`}>
                                    <span className="text-[10px] uppercase font-black text-left leading-tight tracking-widest">{t.sections[key].title}</span>
                                </button>
                            ))}
                        </nav>
                    </div>

                    <div className="flex-1 flex flex-col overflow-hidden relative">
                        <header className={`h-20 border-b flex items-center justify-between px-8 shrink-0 z-30 ${isDark ? 'bg-slate-900 border-slate-800' : 'bg-white border-slate-100'}`}>
                            <button onClick={() => setSidebarOpen(true)} className="lg:hidden p-3 bg-indigo-600 text-white rounded-2xl shadow-lg flex items-center gap-3 px-4 active:scale-95 transition-all">
                                <Icon name="menu" size={20} />
                                <span className="text-[10px] font-black uppercase">MENU</span>
                            </button>
                            <div className="hidden md:block font-bold text-slate-400 text-[10px] uppercase tracking-[0.3em] leading-none">{t.title}</div>
                            <div className="flex items-center gap-4">
                                <button onClick={() => setIsDark(!isDark)} className="p-2.5 bg-slate-100 dark:bg-slate-800 rounded-xl transition-all active:scale-95 shadow-sm"><Icon name={isDark ? "sun" : "moon"} size={20}/></button>
                                <div className="flex items-center gap-1 bg-slate-100 dark:bg-slate-800 p-1.5 rounded-2xl shadow-inner border border-slate-200 dark:border-slate-700">
                                    <button onClick={() => setLang('en')} className={`px-5 py-2 rounded-xl text-[10px] font-black transition-all ${lang === 'en' ? 'bg-white dark:bg-slate-700 text-indigo-600 shadow-sm' : 'text-slate-400'}`}>EN</button>
                                    <button onClick={() => setLang('tr')} className={`px-5 py-2 rounded-xl text-[10px] font-black transition-all ${lang === 'tr' ? 'bg-white dark:bg-slate-700 text-indigo-600 shadow-sm' : 'text-slate-400'}`}>TR</button>
                                </div>
                            </div>
                        </header>

                        <main className="flex-1 overflow-y-auto p-4 md:p-10 pb-48">
                            <div className="max-w-6xl mx-auto space-y-8 animate-in">
                                <div className="relative h-64 md:h-96 rounded-[3.5rem] overflow-hidden shadow-2xl border-8 border-white dark:border-slate-800 group">
                                    <img src={t.sections[activeTab].image} alt="Banner" className="w-full h-full object-cover transition-transform duration-[2000ms] group-hover:scale-110" />
                                    <div className="absolute inset-0 bg-gradient-to-t from-black/95 via-black/40 to-transparent flex flex-col justify-end p-12 md:p-20 text-white text-left"><h2 className="text-4xl md:text-7xl font-black tracking-tighter leading-none uppercase drop-shadow-2xl">{t.sections[activeTab].title}</h2></div>
                                </div>

                                <div className="grid lg:grid-cols-5 gap-12">
                                    <div className="lg:col-span-2 space-y-10">
                                        <div className={`p-10 rounded-[3.5rem] border shadow-2xl ${isDark ? 'bg-slate-900 border-slate-800' : 'bg-white border-slate-50'}`}><p className="text-xl font-medium leading-relaxed opacity-80 text-slate-600 dark:text-slate-300 italic">"{t.sections[activeTab].content}"</p></div>
                                    </div>
                                    <div className={`lg:col-span-3 min-h-[750px] rounded-[4.5rem] border-[12px] shadow-2xl relative ${isDark ? 'bg-slate-900 border-slate-800' : 'bg-white border-white'} ring-1 ring-slate-100 dark:ring-slate-800`}>
                                        {t.sections[activeTab].isSimulation ? (
                                            <NeobankSimulation lang={lang} notify={notify} />
                                        ) : t.sections[activeTab].isStaticChart ? (
                                            <div className="p-10 h-full flex flex-col items-center justify-center text-center space-y-8 animate-in text-slate-800 dark:text-white">
                                                <h4 className="text-3xl font-black uppercase tracking-tighter leading-none">Market Adoption Growth</h4>
                                                <img src="https://images.unsplash.com/photo-1551288049-bbda0231f67e?auto=format&fit=crop&q=80&w=1200" className="rounded-[2.5rem] shadow-2xl w-full h-72 object-cover border-4 border-slate-50" alt="Static Growth Data" />
                                                <div className="grid grid-cols-2 gap-4 w-full text-slate-800 font-black">
                                                    <div className="bg-slate-100 p-6 rounded-3xl"><p className="text-[10px] text-slate-400 uppercase mb-2 tracking-widest">2018 Users</p><p className="text-3xl text-indigo-600 tracking-tighter">32M</p></div>
                                                    <div className="bg-slate-100 p-6 rounded-3xl"><p className="text-[10px] text-slate-400 uppercase mb-2 tracking-widest">2024 Est.</p><p className="text-3xl text-emerald-600 tracking-tighter">95M+</p></div>
                                                </div>
                                            </div>
                                        ) : t.sections[activeTab].isLongArticle ? (
                                            <div className="p-10 md:p-16 h-full overflow-y-auto text-slate-800 dark:text-slate-200 animate-in">
                                                <div className="prose prose-indigo max-w-none space-y-6" dangerouslySetInnerHTML={{ __html: t.sections[activeTab].article }}></div>
                                            </div>
                                        ) : t.sections[activeTab].isTable ? (
                                            <div className="p-16 h-full flex flex-col justify-center animate-in"><h4 className="text-4xl font-black mb-16 tracking-tighter uppercase border-b-8 border-indigo-600 inline-block pb-4 text-slate-800 dark:text-white leading-none">Efficiency Study</h4><table className="w-full border-separate border-spacing-y-8 text-xs font-black uppercase text-slate-800 dark:text-white"><thead><tr className="text-slate-400 text-[10px] text-left tracking-widest"><th>Metric</th><th>Neobanks</th><th>Traditional</th></tr></thead><tbody>{[ { n: "FAST Transfer", neo: "Free", t: "18 TL" }, { n: "Annual Fee", neo: "Free", t: "400 TL" }].map((r, i) => (<tr key={i}><td className={`py-8 pl-10 rounded-l-[3rem] ${isDark ? 'bg-slate-800 text-white' : 'bg-slate-50 text-slate-700 shadow-inner'}`}>{r.n}</td><td className={`py-8 px-8 font-black text-emerald-500 ${isDark ? 'bg-slate-800' : 'bg-slate-50 shadow-inner'}`}>{r.neo}</td><td className={`py-8 pr-10 rounded-r-[3rem] text-slate-400 ${isDark ? 'bg-slate-800' : 'bg-slate-50 shadow-inner'}`}>{r.t}</td></tr>))}</tbody></table></div>
                                        ) : t.sections[activeTab].isGlossary ? (
                                            <div className="p-12 grid gap-6 animate-in overflow-y-auto max-h-[700px] text-slate-800 dark:text-white">{glossaryData.map(item => (<div key={item.term} className={`p-8 rounded-[3rem] border shadow-xl ${isDark ? 'bg-slate-800 border-slate-700' : 'bg-slate-50 border-slate-100'}`}><h6 className="text-lg font-black text-indigo-500 mb-2 uppercase tracking-widest leading-none">{item.term}</h6><p className="text-sm opacity-70 font-medium leading-relaxed">{item.def}</p></div>))}</div>
                                        ) : t.sections[activeTab].isQuiz ? (
                                            <div className="p-16 h-full flex flex-col items-center justify-center text-center animate-in text-slate-800 dark:text-white">{!showResult ? (<div className="space-y-12 w-full max-w-lg"><h5 className="text-3xl font-black leading-tight uppercase tracking-tighter">{quizQuestions[quizStep].q}</h5><div className="space-y-4">{quizQuestions[quizStep].a.map((opt, i) => (<button key={i} onClick={() => { if(i === quizQuestions[quizStep].correct) setQuizScore(quizScore + 1); if(quizStep < quizQuestions.length - 1) setQuizStep(quizStep + 1); else setShowResult(true); }} className={`w-full py-6 rounded-[3rem] border-2 font-black transition-all hover:border-indigo-600 shadow-xl active:scale-95 ${isDark ? 'border-slate-800 bg-slate-800 text-slate-100' : 'border-slate-100 bg-slate-50'}`}>{opt}</button>))}</div></div>) : (<div className="space-y-10 text-slate-800 dark:text-white"><Icon name="award" size={64} className="text-emerald-500 mx-auto animate-bounce"/><h4 className="text-6xl font-black uppercase tracking-tighter">{t.score}: {Math.round((quizScore/quizQuestions.length)*100)}%</h4><button onClick={() => { setQuizStep(0); setQuizScore(0); setShowResult(false); }} className="px-16 py-6 bg-indigo-600 text-white rounded-[3rem] font-black hover:bg-indigo-700 shadow-2xl transition-all uppercase text-xs tracking-widest">Restart</button></div>)}</div>
                                        ) : (
                                            <div className="p-20 flex flex-col items-center justify-center text-center h-full text-slate-800 dark:text-white">
                                                <Icon name="library" size={100} className="text-indigo-600 opacity-20 animate-pulse" />
                                                <h4 className="text-4xl font-black uppercase tracking-tighter opacity-40 leading-none">PhD Hub</h4>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>

                            <footer className="pt-32 pb-16">
                                <div className="max-w-7xl mx-auto flex flex-col lg:flex-row items-center justify-between gap-12 text-[10px] font-black uppercase tracking-[0.3em] text-slate-400">
                                    <div className="flex items-center gap-6 group">
                                        <div className="p-4 bg-indigo-600 text-white rounded-[2rem] shadow-xl shadow-indigo-500/30 transition-transform group-hover:rotate-12"><Icon name="user" size={28} /></div>
                                        <div className="flex flex-col">
                                            <span className="text-xl font-black text-slate-800 dark:text-white tracking-tighter leading-none">Faramarz Kowsari</span>
                                            <span className="text-[10px] opacity-50 mt-2 uppercase tracking-widest leading-none">PhD Candidate • FinTech Strategy</span>
                                        </div>
                                    </div>
                                    <div className="flex flex-col md:flex-row items-center gap-12 leading-none">
                                        <a href="https://linkedin.com/in/faramarzkowsari" target="_blank" className="flex items-center gap-3 hover:text-indigo-600 transition-all hover:scale-105 active:scale-95"><Icon name="linkedin" size={20} className="text-indigo-600" /> LinkedIn</a>
                                        <a href="mailto:info@faramarzkowsari.com" className="flex items-center gap-3 hover:text-indigo-400 transition-all hover:scale-105 active:scale-95"><Icon name="mail" size={20} className="text-indigo-400" /> Email</a>
                                        <a href="https://play.google.com/store/search?q=Faramarz%20Kowsari&c=books" target="_blank" className="flex items-center gap-3 hover:text-indigo-400 transition-all hover:scale-105 active:scale-95"><Icon name="book" size={20} className="text-indigo-400" /> Google Books</a>
                                    </div>
                                    <div className="opacity-10 hidden xl:block uppercase tracking-[0.5em] text-[8px]">Beykoz University • 2024</div>
                                </div>
                            </footer>
                        </main>

                        <div className={`fixed bottom-6 left-1/2 lg:left-[calc(50%+144px)] -translate-x-1/2 z-[120] rounded-full shadow-2xl p-2 px-6 flex items-center gap-6 glass-player animate-in`}>
                            <button onClick={() => { if(isPlaying) synth.pause(); else synth.resume(); setIsPlaying(!isPlaying); }} className="w-12 h-12 flex flex-col items-center justify-center bg-indigo-600 text-white rounded-full shadow-lg shadow-indigo-500/40 active:scale-90 transition-all shrink-0">
                                <Icon name={isPlaying ? "pause" : "play"} size={20} />
                            </button>
                            <span className="text-[10px] font-black uppercase text-indigo-500 hidden sm:block tracking-[0.2em] leading-none whitespace-nowrap">{isPlaying ? "PAUSE" : "PLAY"}</span>
                            <div className="h-6 w-px bg-slate-200 dark:bg-slate-700"></div>
                            <div className="flex items-center gap-5">
                                <div className="flex items-center gap-2">
                                    <span className="text-[8px] font-black text-slate-400 uppercase tracking-widest leading-none">SPD</span>
                                    <input type="range" min="0.5" max="2" step="0.1" value={playbackSpeed} onChange={e => setPlaybackSpeed(parseFloat(e.target.value))} className="w-16"/>
                                </div>
                                <div className="flex items-center gap-2">
                                    <span className="text-[8px] font-black text-slate-400 uppercase tracking-widest leading-none">VOL</span>
                                    <input type="range" min="0" max="1" step="0.1" value={volume} onChange={e => setVolume(parseFloat(e.target.value))} className="w-16"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
